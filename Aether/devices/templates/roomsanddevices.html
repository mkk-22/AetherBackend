<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>

        <h1>Rooms and Devices</h1>

        <!-- List Rooms -->
        <h2>Rooms</h2>
        <ul>
            {% for room in house.rooms.all %}
                <li>
                    <strong>{{ room.name }}</strong>
                    <ul>
                        <!-- List Devices in Room -->
                        {% for device in room.devices.all %}
                            <li>
                                <a href="{% url 'device_detail' device.device_id %}">{{ device.name }}</a>
                                <button onclick="window.location.href='{% url 'device_toggle' device.device_id %}'">
                                    {% if device.status == 'on' %}
                                        Turn Off
                                    {% else %}
                                        Turn On
                                    {% endif %}
                                </button>
                            </li>
                        {% endfor %}
                    </ul>

                    <!-- Add/Remove Devices -->
                    <form method="POST" action="{% url 'add_device' room.room_id %}">
                        {% csrf_token %}
                        <input type="text" name="device_id" placeholder="Device ID" required>
                        <button type="submit">Add Device</button>
                    </form>
                    <form method="POST" action="{% url 'remove_room' room.room_id %}">
                        {% csrf_token %}
                        <button type="submit">Remove Room</button>
                    </form>
                </li>
            {% endfor %}
        </ul>

        <!-- Add Room -->
        <h3>Add New Room</h3>
        <form method="POST" action="{% url 'add_room'%}">
            {% csrf_token %}
            <input type="text" name="room_name" placeholder="Room Name" required>
            <button type="submit">Add Room</button>
        </form>
        
        <script src="" async defer></script>
    </body>
</html>